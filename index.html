<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>호마맨 사자성어</title>
    <style>
      body {
        font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        background: #faf7ef;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      h1 {
        font-size: 32px;
        font-weight: 800;
        margin-bottom: 12px;
      }
      input, button {
        border-radius: 10px;
        border: 1px solid #6b6658;
        padding: 10px 14px;
        background: #fcfaf3;
      }
      .toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 12px;
        justify-content: center;
      }
      .scene {
        width: 90%;
        max-width: 600px;
        height: 280px;
        perspective: 1000px;
      }
      .card {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        border-radius: 22px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.08), 0 6px 14px rgba(0, 0, 0, 0.05);
        border: 1px solid #cdbfa6;
      }
      .card.is-flipped {
        transform: rotateY(180deg);
      }
      .card__face {
        position: absolute;
        inset: 0;
        backface-visibility: hidden;
        border-radius: 22px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #fffaf1;
        background-image: radial-gradient(rgba(0, 0, 0, 0.03) 0.6px, rgba(0, 0, 0, 0) 0.6px),
          radial-gradient(rgba(0, 0, 0, 0.025) 0.8px, rgba(0, 0, 0, 0) 0.8px),
          repeating-linear-gradient(25deg, rgba(136, 112, 88, 0.06) 0 2px, rgba(136, 112, 88, 0.02) 2px 6px),
          repeating-linear-gradient(-18deg, rgba(136, 112, 88, 0.05) 0 3px, rgba(136, 112, 88, 0.02) 3px 7px);
        background-size: 6px 6px, 11px 11px, 100% 100%, 100% 100%;
        text-align: center;
        padding: 20px;
      }
      .card__face--back {
        transform: rotateY(180deg);
      }
      .navs {
        display: flex;
        justify-content: space-between;
        width: 200px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <h1>🀄 호마맨 사자성어</h1>
    <div class="toolbar">
      <input id="search" placeholder="검색(용어/뜻/유래)" />
      <button id="shuffle">🔀 셔플</button>
      <button id="flip">↩️ 뒤집기</button>
      <label><input type="checkbox" id="soundToggle" checked /> 사운드</label>
    </div>

    <div class="scene" id="scene">
      <div class="card" id="card">
        <div class="card__face card__face--front" id="front"></div>
        <div class="card__face card__face--back" id="back"></div>
      </div>
    </div>

    <div class="navs">
      <button id="prev">◀</button>
      <button id="next">▶</button>
    </div>
    <div id="meta"></div>

    <script>
      const idioms = [
        { term: "절차탁마(切磋琢磨)", meaning: "서로 배우며 갈고닦아 향상함.", origin: "시경/예기" },
        { term: "형설지공(螢雪之功)", meaning: "고생하며 학문을 이루는 공.", origin: "진서/수경주" },
        { term: "근묵자흑(近墨者黑)", meaning: "먹을 가까이하면 검어진다.", origin: "태자소부" },
        { term: "대기만성(大器晩成)", meaning: "큰 그릇은 늦게 이루어짐.", origin: "노자" },
        { term: "백절불굴(百折不屈)", meaning: "백 번 꺾여도 굽히지 않음.", origin: "후한서" },
        { term: "온고지신(溫故知新)", meaning: "옛것을 익혀 새것을 안다.", origin: "논어" },
        { term: "유지경성(有志竟成)", meaning: "뜻이 있으면 마침내 이룸.", origin: "후한서" },
        { term: "청출어람(靑出於藍)", meaning: "제자가 스승보다 더 나음.", origin: "순자" },
        { term: "초지일관(初志一貫)", meaning: "처음 세운 뜻을 끝까지 밀고 나감.", origin: "후한서" },
        { term: "사필귀정(事必歸正)", meaning: "모든 일은 결국 바른 데로 돌아감.", origin: "역사서 통용" },
        { term: "권선징악(勸善懲惡)", meaning: "선을 권하고 악을 벌함.", origin: "불교/유교" },
        { term: "지피지기(知彼知己)", meaning: "상대와 자신을 알면 백전백승.", origin: "손자병법" },
        { term: "성실근면(誠實勤勉)", meaning: "성실하고 부지런함.", origin: "유가 경전" },
        { term: "호사다마(好事多魔)", meaning: "좋은 일에는 탈이 많음.", origin: "속담 한자화" },
        { term: "수어지교(水魚之交)", meaning: "물과 물고기의 관계처럼 친밀한 사귐.", origin: "삼국지" },
        { term: "우공이산(愚公移山)", meaning: "어리석은 노인이 산을 옮긴다는 뜻으로 끈기 있게 노력함.", origin: "열자" },
        { term: "견리사의(見利思義)", meaning: "이익을 보거든 의로움을 생각함.", origin: "논어" },
        { term: "과유불급(過猶不及)", meaning: "지나침은 미치지 못함과 같음.", origin: "논어" },
        { term: "공수래공수거(空手來空手去)", meaning: "빈손으로 왔다가 빈손으로 감.", origin: "불경" },
        { term: "명심보감(明心寶鑑)", meaning: "마음을 밝히는 보배로운 거울(도덕 교훈서).", origin: "고려 충렬왕대" },
        { term: "수신제가(修身齊家)", meaning: "몸을 닦고 집안을 가지런히 함.", origin: "대학" },
        { term: "위기일발(危機一髮)", meaning: "한 가닥 머리카락에 매달린 듯한 위급한 순간.", origin: "후한서" },
        { term: "권토중래(捲土重來)", meaning: "실패 후 다시 일어남.", origin: "당서" },
        { term: "고진감래(苦盡甘來)", meaning: "고생 끝에 낙이 옴.", origin: "후한서" },
        { term: "견물생심(見物生心)", meaning: "실물을 보면 욕심이 생김.", origin: "불경 설화" },
        { term: "금상첨화(錦上添花)", meaning: "좋은 일에 또 좋은 일이 더해짐.", origin: "송나라 속담" },
        { term: "전화위복(轉禍爲福)", meaning: "재앙이 바뀌어 복이 됨.", origin: "후한서" },
        { term: "칠전팔기(七顚八起)", meaning: "여러 번 넘어져도 다시 일어남.", origin: "일본서기" },
        { term: "자강불식(自强不息)", meaning: "스스로 힘써 쉬지 않음.", origin: "주역" },
        { term: "수수방관(袖手傍觀)", meaning: "팔짱만 끼고 보고만 있음.", origin: "사기" },
        { term: "백문불여일견(百聞不如一見)", meaning: "백 번 듣는 것이 한 번 보는 것만 못함.", origin: "한서" }
      ];

      let order = shuffle([...Array(idioms.length).keys()]);
      let idx = 0;
      let backShown = false;

      const card = document.getElementById('card');
      const front = document.getElementById('front');
      const back = document.getElementById('back');
      const meta = document.getElementById('meta');

      const soundToggle = document.getElementById('soundToggle');

      function shuffle(arr){
        for(let i=arr.length-1;i>0;i--){
          const j=Math.floor(Math.random()*(i+1));
          [arr[i],arr[j]]=[arr[j],arr[i]];
        }
        return arr;
      }

      function showCard(){
        const cur=idioms[order[idx]];
        front.innerHTML=`<div style='font-size:40px;font-weight:800;'>${cur.term}</div><div style='margin-top:12px;font-size:16px;opacity:0.6;'>카드를 클릭하거나 뒤집기 버튼을 눌러 뜻 보기</div>`;
        back.innerHTML=`<div style='font-size:22px;font-weight:700;'>${cur.meaning}</div><div style='margin-top:10px;font-size:15px;opacity:0.7;'>유래: ${cur.origin}</div>`;
        meta.innerText=`카드 ${idx+1}/${idioms.length}`;
      }

      function flipCard(){
        card.classList.toggle('is-flipped');
        playSound();
        backShown=!backShown;
      }

      function playSound(){
        if(!soundToggle.checked) return;
        const ctx=new (window.AudioContext||window.webkitAudioContext)();
        const osc=ctx.createOscillator();
        const gain=ctx.createGain();
        osc.type='triangle';
        const now=ctx.currentTime;
        osc.frequency.setValueAtTime(300,now);
        osc.frequency.exponentialRampToValueAtTime(800,now+0.15);
        gain.gain.setValueAtTime(0.2,now);
        gain.gain.exponentialRampToValueAtTime(0.001,now+0.15);
        osc.connect(gain).connect(ctx.destination);
        osc.start(now);
        osc.stop(now+0.15);
      }

      document.getElementById('flip').onclick=flipCard;
      document.getElementById('next').onclick=()=>{backShown=false;card.classList.remove('is-flipped');idx=(idx+1)%idioms.length;showCard();};
      document.getElementById('prev').onclick=()=>{backShown=false;card.classList.remove('is-flipped');idx=(idx-1+idioms.length)%idioms.length;showCard();};
      document.getElementById('shuffle').onclick=()=>{order=shuffle(order);idx=0;backShown=false;card.classList.remove('is-flipped');showCard();};
      card.onclick=flipCard;

      showCard();
    </script>
  </body>
</html>
