<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>호마맨 사자성어</title>
    <style>
      body {
        font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        background: #faf7ef;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      h1 { font-size: 32px; font-weight: 800; margin-bottom: 12px; }
      input, button { border-radius: 10px; border: 1px solid #6b6658; padding: 10px 14px; background: #fcfaf3; }
      .toolbar { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; justify-content: center; }
      .scene { width: 90%; max-width: 640px; height: 320px; perspective: 1000px; }
      .card { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; border-radius: 22px; box-shadow: 0 12px 28px rgba(0,0,0,0.08), 0 6px 14px rgba(0,0,0,0.05); border: 1px solid #d9cdb7; }
      .card.is-flipped { transform: rotateY(180deg); }
      .card__face {
        position: absolute; inset: 0; backface-visibility: hidden; border-radius: 22px;
        display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 26px;
        /* 부드러운 한지 그라디언트 (와플 느낌 제거) */
        background: radial-gradient(120% 90% at 50% 10%, #fffdf9 0%, #fff6e9 55%, #ffeeda 100%);
        /* 가느다란 섬유결과 점박이 질감 (아주 옅게) */
        background-image:
          radial-gradient(rgba(0,0,0,0.025) 0.7px, rgba(0,0,0,0) 0.7px),
          radial-gradient(rgba(0,0,0,0.02) 1px, rgba(0,0,0,0) 1px),
          linear-gradient(12deg, rgba(120,90,60,0.04), rgba(120,90,60,0.02) 35%, rgba(120,90,60,0.04) 70%);
        background-size: 10px 10px, 16px 16px, 100% 100%;
        background-blend-mode: multiply;
      }
      .card__face--back { transform: rotateY(180deg); }
      .navs { display: flex; justify-content: space-between; width: 200px; margin: 10px 0; }
      .muted { opacity: .6; font-size: 14px; }
    </style>
  </head>
  <body>
    <h1>🀄 호마맨 사자성어</h1>
    <div class="toolbar">
      <input id="search" placeholder="검색(용어/뜻/유래)" />
      <button id="shuffle">🔀 셔플</button>
      <button id="flip">↩️ 뒤집기</button>
      <label><input type="checkbox" id="soundToggle" checked /> 사운드</label>
    </div>

    <div class="scene" id="scene">
      <div class="card" id="card">
        <div class="card__face card__face--front" id="front"></div>
        <div class="card__face card__face--back" id="back"></div>
      </div>
    </div>

    <div class="navs">
      <button id="prev">◀</button>
      <button id="next">▶</button>
    </div>
    <div id="meta" class="muted"></div>

    <script>
      // 100개 사자성어 데이터
      const idioms = [
        { term: "절차탁마(切磋琢磨)", meaning: "서로 배우며 갈고닦아 향상함.", origin: "시경/예기" },
        { term: "형설지공(螢雪之功)", meaning: "고생하며 학문을 이루는 공.", origin: "진서/수경주" },
        { term: "근묵자흑(近墨者黑)", meaning: "먹을 가까이하면 검어진다(환경의 영향).", origin: "태자소부" },
        { term: "근주자적(近朱者赤)", meaning: "좋은 벗을 가까이하면 붉어진다.", origin: "태자소부" },
        { term: "대기만성(大器晩成)", meaning: "큰 그릇은 늦게 이루어짐.", origin: "노자" },
        { term: "백절불굴(百折不屈)", meaning: "백 번 꺾여도 굽히지 않음.", origin: "후한서" },
        { term: "견리사의(見利思義)", meaning: "이익을 보거든 의로움을 먼저 생각함.", origin: "논어" },
        { term: "견위수명(見危授命)", meaning: "위태로움을 보면 목숨을 바쳐 의를 행함.", origin: "예기" },
        { term: "충언역이(忠言逆耳)", meaning: "충고는 귀에 거슬리나 유익함.", origin: "고사" },
        { term: "정문일침(頂門一鍼)", meaning: "아픈 곳을 찌르는 따끔한 충고.", origin: "고사" },
        { term: "결초보은(結草報恩)", meaning: "죽어서도 은혜를 갚음.", origin: "좌전" },
        { term: "삼고초려(三顧草廬)", meaning: "세 번 찾아가 정성을 다함.", origin: "삼국지" },
        { term: "수오지심(羞惡之心)", meaning: "부끄러움을 아는 마음.", origin: "맹자" },
        { term: "인의예지(仁義禮智)", meaning: "사람됨의 네 덕목.", origin: "유가" },
        { term: "불편부당(不偏不黨)", meaning: "치우치지 않고 당파에 서지 않음.", origin: "사서" },
        { term: "상선약수(上善若水)", meaning: "최고의 선은 물과 같음.", origin: "노자" },
        { term: "명경지수(明鏡止水)", meaning: "밝은 거울·고요한 물 같은 마음.", origin: "장자" },
        { term: "온고지신(溫故知新)", meaning: "옛것을 익혀 새것을 앎.", origin: "논어" },
        { term: "수기치인(修己治人)", meaning: "자기를 닦아 남을 다스림.", origin: "대학" },
        { term: "입신양명(立身揚名)", meaning: "몸을 세워 이름을 떨침.", origin: "사기" },
        { term: "멸사봉공(滅私奉公)", meaning: "사사로움을 버리고 공익을 받듦.", origin: "근대" },
        { term: "염치불감(廉恥不堪)", meaning: "염치에 부끄러워 견디기 어려움.", origin: "사서" },
        { term: "맹모삼천(孟母三遷)", meaning: "교육을 위해 세 번 이사함.", origin: "열녀전" },
        { term: "군자삼락(君子三樂)", meaning: "군자의 세 즐거움.", origin: "맹자" },
        { term: "군자불기(君子不器)", meaning: "군자는 한 가지 그릇에 국한되지 않음.", origin: "논어" },
        { term: "경천애인(敬天愛人)", meaning: "하늘을 공경하고 사람을 사랑함.", origin: "왕양명 계" },
        { term: "과감단행(果敢斷行)", meaning: "과감히 결단하고 실행함.", origin: "근대" },
        { term: "인과응보(因果應報)", meaning: "원인에 따라 보응이 옴.", origin: "불교" },
        { term: "유지경성(有志竟成)", meaning: "뜻이 있으면 마침내 이룸.", origin: "후한서" },
        { term: "권선징악(勸善懲惡)", meaning: "선을 권하고 악을 벌함.", origin: "유불" },
        { term: "지피지기(知彼知己)", meaning: "상대와 자신을 알면 이김.", origin: "손자병법" },
        { term: "호사다마(好事多魔)", meaning: "좋은 일에는 탈이 많음.", origin: "속담" },
        { term: "우공이산(愚公移山)", meaning: "끈기로 큰일을 이룸.", origin: "열자" },
        { term: "과유불급(過猶不及)", meaning: "지나침은 미치지 못함과 같음.", origin: "논어" },
        { term: "수신제가(修身齊家)", meaning: "몸을 닦고 집안을 다스림.", origin: "대학" },
        { term: "위기일발(危機一髮)", meaning: "몹시 위급한 순간.", origin: "후한서" },
        { term: "권토중래(捲土重來)", meaning: "실패 뒤에 다시 일어남.", origin: "당서" },
        { term: "고진감래(苦盡甘來)", meaning: "고생 끝에 낙이 옴.", origin: "후한서" },
        { term: "견물생심(見物生心)", meaning: "실물을 보면 욕심이 남.", origin: "불전" },
        { term: "금상첨화(錦上添花)", meaning: "좋은 일에 좋은 일이 더함.", origin: "송대" },
        { term: "전화위복(轉禍爲福)", meaning: "재앙이 복으로 바뀜.", origin: "후한서" },
        { term: "칠전팔기(七顚八起)", meaning: "여러 번 넘어져도 일어남.", origin: "일본서기" },
        { term: "자강불식(自強不息)", meaning: "스스로 힘써 쉼이 없음.", origin: "주역" },
        { term: "수수방관(袖手傍觀)", meaning: "팔짱 끼고 보고만 있음.", origin: "사기" },
        { term: "백문불여일견(百聞不如一見)", meaning: "백 번 듣는 것보다 한 번 보는 게 나음.", origin: "한서" },
        { term: "각골난망(刻骨難忘)", meaning: "은혜가 깊어 잊지 못함.", origin: "고사" },
        { term: "감언이설(甘言利說)", meaning: "달콤한 말로 꾀어 속임.", origin: "맹자" },
        { term: "거두절미(去頭截尾)", meaning: "군더더기 빼고 요점만 말함.", origin: "한서" },
        { term: "경거망동(輕擧妄動)", meaning: "경솔히 행동함.", origin: "후한서" },
        { term: "구사일생(九死一生)", meaning: "죽을 고비를 여러 번 넘김.", origin: "사서" },
        { term: "기고만장(氣高萬丈)", meaning: "기세가 대단히 오름.", origin: "삼국지" },
        { term: "기호지세(騎虎之勢)", meaning: "중도에서 그만둘 수 없는 형세.", origin: "후한서" },
        { term: "난공불락(難攻不落)", meaning: "쉽게 함락되지 않음.", origin: "병법" },
        { term: "난형난제(難兄難弟)", meaning: "우열을 가리기 어려움.", origin: "남북조" },
        { term: "누란지위(累卵之危)", meaning: "달걀을 쌓은 듯 매우 위태함.", origin: "한비자" },
        { term: "다다익선(多多益善)", meaning: "많을수록 더 좋음.", origin: "사기" },
        { term: "다재다능(多才多能)", meaning: "재주가 많고 능함.", origin: "한자어" },
        { term: "대동단결(大同團結)", meaning: "큰 뜻 아래 한마음으로 뭉침.", origin: "근현대" },
        { term: "동병상련(同病相憐)", meaning: "같은 처지끼리 서로 동정함.", origin: "삼국지" },
        { term: "동상이몽(同床異夢)", meaning: "겉으론 같으나 속뜻은 다름.", origin: "잡감" },
        { term: "동문서답(東問西答)", meaning: "묻는 말에 동떨어진 대답.", origin: "한서" },
        { term: "마이동풍(馬耳東風)", meaning: "남의 말을 귀담아듣지 않음.", origin: "시경" },
        { term: "막상막하(莫上莫下)", meaning: "차이가 거의 없음.", origin: "송사" },
        { term: "만장일치(滿場一致)", meaning: "모두가 한 뜻으로 찬성함.", origin: "현대" },
        { term: "명실상부(名實相符)", meaning: "이름과 실제가 서로 맞음.", origin: "후한서" },
        { term: "반면교사(反面敎師)", meaning: "남의 실패에서 교훈 얻음.", origin: "사기" },
        { term: "부전자전(父傳子傳)", meaning: "아비의 행동이 아들에게 전해짐.", origin: "속담" },
        { term: "부화뇌동(附和雷同)", meaning: "주견 없이 남을 따름.", origin: "장자" },
        { term: "사면초가(四面楚歌)", meaning: "사방이 적으로 둘러싸임.", origin: "사기" },
        { term: "산전수전(山戰水戰)", meaning: "온갖 어려움을 다 겪음.", origin: "병법" },
        { term: "새옹지마(塞翁之馬)", meaning: "인생의 길흉화복은 예측하기 어려움.", origin: "회남자" },
        { term: "선견지명(先見之明)", meaning: "앞을 내다보는 지혜.", origin: "한서" },
        { term: "설상가상(雪上加霜)", meaning: "엎친 데 덮침.", origin: "시경" },
        { term: "속수무책(束手無策)", meaning: "어찌할 도리가 없음.", origin: "사기" },
        { term: "십중팔구(十中八九)", meaning: "거의 대부분.", origin: "속어" },
        { term: "아전인수(我田引水)", meaning: "자기에게만 이롭게 함.", origin: "맹자" },
        { term: "어부지리(漁夫之利)", meaning: "둘이 다투다 제삼자가 이익 봄.", origin: "전국책" },
        { term: "언행일치(言行一致)", meaning: "말과 행동이 하나로 맞음.", origin: "논어" },
        { term: "오리무중(五里霧中)", meaning: "갈 바를 모르고 헤맴.", origin: "후한서" },
        { term: "우왕좌왕(右往左往)", meaning: "이리저리 허둥댐.", origin: "한서" },
        { term: "유비무환(有備無患)", meaning: "미리 준비하면 근심 없음.", origin: "서경" },
        { term: "유유상종(類類相從)", meaning: "같은 무리끼리 모임.", origin: "한서" },
        { term: "이심전심(以心傳心)", meaning: "말하지 않아도 마음이 통함.", origin: "선종" },
        { term: "이열치열(以熱治熱)", meaning: "같은 성질로 다스림.", origin: "의서 관용" },
        { term: "이목구비(耳目口鼻)", meaning: "사람의 얼굴 생김새.", origin: "한자" },
        { term: "일석이조(一石二鳥)", meaning: "한 번에 두 가지 이익.", origin: "서양격언 번역" },
        { term: "일취월장(日就月將)", meaning: "날로 달로 발전함.", origin: "서경" },
        { term: "작심삼일(作心三日)", meaning: "결심이 오래가지 못함.", origin: "속담" },
        { term: "자업자득(自業自得)", meaning: "자기가 한 대로 얻음.", origin: "불교" },
        { term: "자중지란(自中之亂)", meaning: "같은 편 안에서의 혼란.", origin: "사기" },
        { term: "전전긍긍(戰戰兢兢)", meaning: "두려워 벌벌 떨며 조심함.", origin: "시경" },
        { term: "조삼모사(朝三暮四)", meaning: "본질은 같음을 모르는 어리석음.", origin: "장자" },
        { term: "좌충우돌(左衝右突)", meaning: "이리저리 부딪치며 분주함.", origin: "삼국지" },
        { term: "죽마고우(竹馬故友)", meaning: "어릴 적부터의 벗.", origin: "시경" },
        { term: "중구난방(衆口難防)", meaning: "여러 말이 제각각임.", origin: "명대 소설" },
        { term: "천고마비(天高馬肥)", meaning: "가을 하늘 높고 말 살찜.", origin: "당시" },
        { term: "천우신조(天佑神助)", meaning: "하늘과 신의 도움.", origin: "관용" },
        { term: "청출어람(靑出於藍)", meaning: "제자가 스승보다 나음.", origin: "순자" },
        { term: "초지일관(初志一貫)", meaning: "처음 뜻을 끝까지 밀고 나감.", origin: "후한서" },
        { term: "침소봉대(針小棒大)", meaning: "작은 일을 크게 과장함.", origin: "속어" },
        { term: "토사구팽(土沙狗烹)", meaning: "쓸 때는 쓰고 버림.", origin: "사기" },
        { term: "파죽지세(破竹之勢)", meaning: "대나무 쪼개듯 거침없이 나아감.", origin: "진서" },
        { term: "표리부동(表裏不同)", meaning: "겉과 속이 다름.", origin: "후한서" },
        { term: "학수고대(鶴首苦待)", meaning: "학처럼 목을 빼고 간절히 기다림.", origin: "시경" },
        { term: "허심탄회(虛心坦懷)", meaning: "숨김없이 솔직함.", origin: "명심보감" },
        { term: "환골탈태(換骨奪胎)", meaning: "완전히 새로워짐.", origin: "송대" },
        { term: "후회막급(後悔莫及)", meaning: "뉘우쳐도 이미 늦음.", origin: "한서" }
      ];

      // === 뷰 상태 ===
      const search = document.getElementById('search');
      const card = document.getElementById('card');
      const front = document.getElementById('front');
      const back = document.getElementById('back');
      const meta = document.getElementById('meta');
      const soundToggle = document.getElementById('soundToggle');

      let allIdx = [...Array(idioms.length).keys()];
      let order = shuffle([...allIdx]);
      let idx = 0;
      let backShown = false;

      function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }

      function applyFilter(){
        const q = (search.value||'').trim().toLowerCase();
        const filtered = allIdx.filter(i => `${idioms[i].term} ${idioms[i].meaning} ${idioms[i].origin}`.toLowerCase().includes(q));
        order = shuffle([...filtered]);
        idx = 0; backShown = false; card.classList.remove('is-flipped');
        showCard();
      }

      function showCard(){
        if(order.length === 0){
          front.innerHTML = `<div style='font-size:18px'>검색 결과가 없습니다.</div>`;
          back.innerHTML = `<div class='muted'>다른 키워드를 입력해 보세요.</div>`;
          meta.innerText = `0 / ${idioms.length}`;
          return;
        }
        const cur=idioms[order[idx]];
        front.innerHTML=`<div style='font-size:44px;font-weight:800;letter-spacing:1px;'>${cur.term}</div><div style='margin-top:12px;font-size:16px;opacity:0.6;'>카드를 클릭하거나 뒤집기 버튼을 눌러 뜻 보기</div>`;
        back.innerHTML=`<div style='font-size:22px;font-weight:700;'>${cur.meaning}</div><div style='margin-top:10px;font-size:15px;opacity:0.7;'>유래: ${cur.origin}</div>`;
        meta.innerText=`카드 ${idx+1}/${order.length} · 전체 ${idioms.length}`;
      }

      function flipCard(){ card.classList.toggle('is-flipped'); playSound(); backShown=!backShown; }
      function next(){ if(order.length===0) return; backShown=false; card.classList.remove('is-flipped'); idx=(idx+1)%order.length; showCard(); }
      function prev(){ if(order.length===0) return; backShown=false; card.classList.remove('is-flipped'); idx=(idx-1+order.length)%order.length; showCard(); }
      function reshuffle(){ if(order.length===0) return; order = shuffle(order); idx=0; backShown=false; card.classList.remove('is-flipped'); showCard(); }

      function playSound(){
        if(!soundToggle.checked) return;
        const ctx=new (window.AudioContext||window.webkitAudioContext)();
        const osc=ctx.createOscillator(); const gain=ctx.createGain();
        const now=ctx.currentTime; osc.type='triangle';
        osc.frequency.setValueAtTime(300,now); osc.frequency.exponentialRampToValueAtTime(800,now+0.15);
        gain.gain.setValueAtTime(0.2,now); gain.gain.exponentialRampToValueAtTime(0.001,now+0.15);
        osc.connect(gain).connect(ctx.destination); osc.start(now); osc.stop(now+0.15);
      }

      document.getElementById('flip').onclick=flipCard;
      document.getElementById('next').onclick=next;
      document.getElementById('prev').onclick=prev;
      document.getElementById('shuffle').onclick=reshuffle;
      card.onclick=flipCard;
      search.addEventListener('input', applyFilter);

      showCard();
    </script>
  </body>
</html>
