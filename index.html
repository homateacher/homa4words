<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í˜¸ë§ˆë§¨ ì‚¬ìì„±ì–´</title>
    <style>
      body {
        font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        background: #faf7ef;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      h1 {
        font-size: 32px;
        font-weight: 800;
        margin-bottom: 12px;
      }
      input, button {
        border-radius: 10px;
        border: 1px solid #6b6658;
        padding: 10px 14px;
        background: #fcfaf3;
      }
      .toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 12px;
        justify-content: center;
      }
      .scene {
        width: 90%;
        max-width: 600px;
        height: 280px;
        perspective: 1000px;
      }
      .card {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        border-radius: 22px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.08), 0 6px 14px rgba(0, 0, 0, 0.05);
        border: 1px solid #cdbfa6;
      }
      .card.is-flipped {
        transform: rotateY(180deg);
      }
      .card__face {
        position: absolute;
        inset: 0;
        backface-visibility: hidden;
        border-radius: 22px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #fffaf1;
        background-image: radial-gradient(rgba(0, 0, 0, 0.03) 0.6px, rgba(0, 0, 0, 0) 0.6px),
          radial-gradient(rgba(0, 0, 0, 0.025) 0.8px, rgba(0, 0, 0, 0) 0.8px),
          repeating-linear-gradient(25deg, rgba(136, 112, 88, 0.06) 0 2px, rgba(136, 112, 88, 0.02) 2px 6px),
          repeating-linear-gradient(-18deg, rgba(136, 112, 88, 0.05) 0 3px, rgba(136, 112, 88, 0.02) 3px 7px);
        background-size: 6px 6px, 11px 11px, 100% 100%, 100% 100%;
        text-align: center;
        padding: 20px;
      }
      .card__face--back {
        transform: rotateY(180deg);
      }
      .navs {
        display: flex;
        justify-content: space-between;
        width: 200px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ€„ í˜¸ë§ˆë§¨ ì‚¬ìì„±ì–´</h1>
    <div class="toolbar">
      <input id="search" placeholder="ê²€ìƒ‰(ìš©ì–´/ëœ»/ìœ ë˜)" />
      <button id="shuffle">ğŸ”€ ì…”í”Œ</button>
      <button id="flip">â†©ï¸ ë’¤ì§‘ê¸°</button>
      <label><input type="checkbox" id="soundToggle" checked /> ì‚¬ìš´ë“œ</label>
    </div>

    <div class="scene" id="scene">
      <div class="card" id="card">
        <div class="card__face card__face--front" id="front"></div>
        <div class="card__face card__face--back" id="back"></div>
      </div>
    </div>

    <div class="navs">
      <button id="prev">â—€</button>
      <button id="next">â–¶</button>
    </div>
    <div id="meta"></div>

    <script>
      const idioms = [
        { term: "ì ˆì°¨íƒë§ˆ(åˆ‡ç£‹ç¢ç£¨)", meaning: "ì„œë¡œ ë°°ìš°ë©° ê°ˆê³ ë‹¦ì•„ í–¥ìƒí•¨.", origin: "ì‹œê²½/ì˜ˆê¸°" },
        { term: "í˜•ì„¤ì§€ê³µ(è¢é›ªä¹‹åŠŸ)", meaning: "ê³ ìƒí•˜ë©° í•™ë¬¸ì„ ì´ë£¨ëŠ” ê³µ.", origin: "ì§„ì„œ/ìˆ˜ê²½ì£¼" },
        { term: "ê·¼ë¬µìí‘(è¿‘å¢¨è€…é»‘)", meaning: "ë¨¹ì„ ê°€ê¹Œì´í•˜ë©´ ê²€ì–´ì§„ë‹¤.", origin: "íƒœìì†Œë¶€" },
        { term: "ëŒ€ê¸°ë§Œì„±(å¤§å™¨æ™©æˆ)", meaning: "í° ê·¸ë¦‡ì€ ëŠ¦ê²Œ ì´ë£¨ì–´ì§.", origin: "ë…¸ì" },
        { term: "ë°±ì ˆë¶ˆêµ´(ç™¾æŠ˜ä¸å±ˆ)", meaning: "ë°± ë²ˆ êº¾ì—¬ë„ êµ½íˆì§€ ì•ŠìŒ.", origin: "í›„í•œì„œ" },
        { term: "ì˜¨ê³ ì§€ì‹ (æº«æ•…çŸ¥æ–°)", meaning: "ì˜›ê²ƒì„ ìµí˜€ ìƒˆê²ƒì„ ì•ˆë‹¤.", origin: "ë…¼ì–´" },
        { term: "ìœ ì§€ê²½ì„±(æœ‰å¿—ç«Ÿæˆ)", meaning: "ëœ»ì´ ìˆìœ¼ë©´ ë§ˆì¹¨ë‚´ ì´ë£¸.", origin: "í›„í•œì„œ" },
        { term: "ì²­ì¶œì–´ëŒ(é‘å‡ºæ–¼è—)", meaning: "ì œìê°€ ìŠ¤ìŠ¹ë³´ë‹¤ ë” ë‚˜ìŒ.", origin: "ìˆœì" },
        { term: "ì´ˆì§€ì¼ê´€(åˆå¿—ä¸€è²«)", meaning: "ì²˜ìŒ ì„¸ìš´ ëœ»ì„ ëê¹Œì§€ ë°€ê³  ë‚˜ê°.", origin: "í›„í•œì„œ" },
        { term: "ì‚¬í•„ê·€ì •(äº‹å¿…æ­¸æ­£)", meaning: "ëª¨ë“  ì¼ì€ ê²°êµ­ ë°”ë¥¸ ë°ë¡œ ëŒì•„ê°.", origin: "ì—­ì‚¬ì„œ í†µìš©" }
      ];

      let order = shuffle([...Array(idioms.length).keys()]);
      let idx = 0;
      let backShown = false;

      const card = document.getElementById('card');
      const front = document.getElementById('front');
      const back = document.getElementById('back');
      const meta = document.getElementById('meta');

      const soundToggle = document.getElementById('soundToggle');

      function shuffle(arr){
        for(let i=arr.length-1;i>0;i--){
          const j=Math.floor(Math.random()*(i+1));
          [arr[i],arr[j]]=[arr[j],arr[i]];
        }
        return arr;
      }

      function showCard(){
        const cur=idioms[order[idx]];
        front.innerHTML=`<div style='font-size:40px;font-weight:800;'>${cur.term}</div><div style='margin-top:12px;font-size:16px;opacity:0.6;'>ì¹´ë“œë¥¼ í´ë¦­í•˜ê±°ë‚˜ ë’¤ì§‘ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ëœ» ë³´ê¸°</div>`;
        back.innerHTML=`<div style='font-size:22px;font-weight:700;'>${cur.meaning}</div><div style='margin-top:10px;font-size:15px;opacity:0.7;'>ìœ ë˜: ${cur.origin}</div>`;
        meta.innerText=`ì¹´ë“œ ${idx+1}/${idioms.length}`;
      }

      function flipCard(){
        card.classList.toggle('is-flipped');
        playSound();
        backShown=!backShown;
      }

      function playSound(){
        if(!soundToggle.checked) return;
        const ctx=new (window.AudioContext||window.webkitAudioContext)();
        const osc=ctx.createOscillator();
        const gain=ctx.createGain();
        osc.type='triangle';
        const now=ctx.currentTime;
        osc.frequency.setValueAtTime(300,now);
        osc.frequency.exponentialRampToValueAtTime(800,now+0.15);
        gain.gain.setValueAtTime(0.2,now);
        gain.gain.exponentialRampToValueAtTime(0.001,now+0.15);
        osc.connect(gain).connect(ctx.destination);
        osc.start(now);
        osc.stop(now+0.15);
      }

      document.getElementById('flip').onclick=flipCard;
      document.getElementById('next').onclick=()=>{backShown=false;card.classList.remove('is-flipped');idx=(idx+1)%idioms.length;showCard();};
      document.getElementById('prev').onclick=()=>{backShown=false;card.classList.remove('is-flipped');idx=(idx-1+idioms.length)%idioms.length;showCard();};
      document.getElementById('shuffle').onclick=()=>{order=shuffle(order);idx=0;backShown=false;card.classList.remove('is-flipped');showCard();};
      card.onclick=flipCard;

      showCard();
    </script>
  </body>
</html>
